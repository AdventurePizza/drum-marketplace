(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(e,t){},193:function(e,t,n){},195:function(e,t,n){},200:function(e,t){},202:function(e,t){},212:function(e,t){},214:function(e,t){},240:function(e,t){},241:function(e,t){},247:function(e,t){},266:function(e,t){},305:function(e,t){},307:function(e,t){},329:function(e,t){},341:function(e,t,n){"use strict";n.r(t);n(193);var r=n(75),s=n(38),a=n(25),c=n(0),i=n.n(c),o=(n(195),n(3)),u=n(359),l=n(362),d=n(361),p=n(17),f=n(43),h=n(189),j=n(18),b=new f.b("https://mainnet.api.tez.ie"),y=new h.a({name:"hicetnunc.xyz",preferblackNetwork:"mainnet"});b.setWalletProvider(y);var m=new p.i({name:"Beacon Docs"}),x=Object(u.a)((function(e){return Object(l.a)({root:{display:"flex"},sizeBig:{width:e.spacing(12),height:e.spacing(12)},sizeSmall:{width:e.spacing(6),height:e.spacing(6)}})}));var g=function(){x();var e=Object(o.useState)(),t=Object(a.a)(e,2),n=t[0],c=t[1],u=Object(o.useState)("sync"),l=Object(a.a)(u,2),p=l[0],h=l[1],y=Object(o.useState)(!1),g=Object(a.a)(y,2),O=g[0],w=g[1],k=window.innerWidth<=500,A=Object(o.useState)([]),T=Object(a.a)(A,2),S=T[0],_=T[1];Object(o.useEffect)((function(){function e(){return(e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,fetch("https://api.tzstats.com/explorer/bigmap/52426/values").then((function(e){return e.json()})).then((function(e){for(var r=0;r<e.length;r++)e[r].key[0]===t&&(n=e[r].value,console.log(n))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n&&function(t){e.apply(this,arguments)}(n.address)}),[n]),Object(o.useEffect)((function(){function e(e,n,r){return t.apply(this,arguments)}function t(){return(t=Object(s.a)(i.a.mark((function e(t,n,r){var s,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://hdapi.teztools.io/v1/graphql",{method:"POST",body:JSON.stringify({query:t,variables:r,operationName:n})});case 2:return s=e.sent,e.next=5,s.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=Object(s.a)(i.a.mark((function t(n){var r,s,a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(v,"collectorGallery",{address:n});case 2:return r=t.sent,s=r.errors,a=r.data,s&&console.error(s),c=a?a.hic_et_nunc_token_holder:null,console.log("result"),console.log(c),_(c),t.abrupt("return",c);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(e){n.apply(this,arguments)}("KT1XgZSkrPfEyfjeBtionEquy54hyMMa6HL5")}),[n]);var E=function(e,t){if(void 0===e)return"";switch(t){case"HIC":return e.replace("ipfs://","https://pinata.hicetnunc.xyz/ipfs/");case"CLOUDFLARE":return e.replace("ipfs://","https://cloudflare-ipfs.com/ipfs/");case"PINATA":return e.replace("ipfs://","https://gateway.pinata.cloud/ipfs/");case"IPFS":return e.replace("ipfs://","https://ipfs.io/ipfs/");case"INFURA":try{var n=new ipfsClient.CID(e.replace("ipfs://","")).toV1().toBaseEncodedString("base32");return"https://".concat(n,".ipfs.infura-ipfs.io/")}catch(r){return}case"DWEB":return e.replace("ipfs://","http://dweb.link/ipfs/");default:return console.error("please specify type"),e}};function P(e){return z.apply(this,arguments)}function z(){return(z=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.tezos.domains/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'\n            {\n              reverseRecord(address: "'+t+'"){owner domain{name}}\n            }\n            ',variables:{}})}).then((function(e){return e.json()})).then((function(e){e.data.reverseRecord&&(n=e.data.reverseRecord.domain.name,h(n))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,m.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),n&&m.clearActiveAccount().then(Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,m.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),h("sync"),w(!1);case 7:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return L.apply(this,arguments)}function L(){return(L=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,m.getActiveAccount();case 3:if(e.t1=e.sent,(0,e.t0)(e.t1),!n){e.next=12;break}return h(n.address),w(!0),P(n.address),e.abrupt("return",n);case 12:return e.prev=12,console.log("Requesting permissions..."),e.next=16,m.requestPermissions();case 16:return t=e.sent,e.t2=c,e.next=20,m.getActiveAccount();case 20:e.t3=e.sent,(0,e.t2)(e.t3),console.log("Got permissions:",t.address),h(t.address),w(!0),P(t.address),e.next=31;break;case 28:e.prev=28,e.t4=e.catch(12),console.log("Got error:",e.t4);case 31:case"end":return e.stop()}}),e,null,[[12,28]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){function e(){return(e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,m.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),n?(h(n.address.slice(0,6)+"..."+n.address.slice(32,36)),w(!0),P(n.address)):(h("sync"),w(!1));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{style:{height:"100vh"},children:[Object(j.jsx)("div",{style:{fontSize:k?"1em":"1.5em",textAlign:"center",padding:10},children:Object(j.jsx)("b",{children:"DRUM MARKETPLACE"})}),Object(j.jsxs)("div",{style:{display:k?"grid":"flex",width:"100vw",flexWrap:"wrap"},children:[k&&S.map((function(e,t){return Object(j.jsxs)("div",{style:{padding:"5vw",width:"90vw"},children:[Object(j.jsxs)("div",{style:{textAlign:"center"},children:[" ",e.token.title," "]}),Object(j.jsx)("img",{src:E(e.token.display_uri,"IPFS"),alt:e.token.title,width:"100%"}),Object(j.jsx)("div",{style:{textAlign:"center"},children:" 1000 DRUM "}),Object(j.jsxs)(d.a,{size:k?"small":"medium",title:"buy",onClick:Object(s.a)(i.a.mark((function t(){var s,a,c,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=19;break}return console.log("objkt.token.id"),t.next=4,b.wallet.at("KT1DX7UdxtzW7bEBihW31kV8Ge4MojAgrLNW");case 4:return s=t.sent,t.next=7,b.wallet.at("KT1XgZSkrPfEyfjeBtionEquy54hyMMa6HL5");case 7:return a=t.sent,console.log(e.token.id),console.log(n.address),c=[Object(r.a)({kind:f.a.TRANSACTION},s.methods.update_operators([{add_operator:{operator:"KT1XgZSkrPfEyfjeBtionEquy54hyMMa6HL5",token_id:0,owner:n.address}}]).toTransferParams({amount:0,mutez:!0,storageLimit:175})),Object(r.a)({kind:f.a.TRANSACTION},a.methods.default({value:e.token.id}).toTransferParams({amount:0,mutez:!0,storageLimit:300}))],t.next=13,b.wallet.batch(c);case 13:return o=t.sent,t.next=16,o.send();case 16:return t.abrupt("return",t.sent);case 19:N();case 20:case"end":return t.stop()}}),t)}))),style:{width:"100%"},children:[Object(j.jsx)("u",{children:" Buy"})," "]})]})})),!k&&S.map((function(e,t){return Object(j.jsxs)("div",{style:{padding:"1vw",width:"18vw"},children:[Object(j.jsxs)("div",{style:{textAlign:"center"},children:[" ",e.token.title," "]}),Object(j.jsx)("img",{src:E(e.token.display_uri,"IPFS"),alt:e.token.title,width:"100%"}),Object(j.jsx)("div",{style:{textAlign:"center"},children:" 1000 DRUM "}),Object(j.jsxs)(d.a,{size:k?"small":"medium",title:"buy",onClick:Object(s.a)(i.a.mark((function t(){var s,a,c,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=19;break}return console.log("objkt.token.id"),t.next=4,b.wallet.at("KT1DX7UdxtzW7bEBihW31kV8Ge4MojAgrLNW");case 4:return s=t.sent,t.next=7,b.wallet.at("KT1XgZSkrPfEyfjeBtionEquy54hyMMa6HL5");case 7:return a=t.sent,console.log(e.token.id),console.log(n.address),c=[Object(r.a)({kind:f.a.TRANSACTION},s.methods.update_operators([{add_operator:{operator:"KT1XgZSkrPfEyfjeBtionEquy54hyMMa6HL5",token_id:0,owner:n.address}}]).toTransferParams({amount:0,mutez:!0,storageLimit:175})),Object(r.a)({kind:f.a.TRANSACTION},a.methods.default(e.token.id).toTransferParams({amount:0,mutez:!0,storageLimit:300}))],t.next=13,b.wallet.batch(c);case 13:return o=t.sent,t.next=16,o.send();case 16:return t.abrupt("return",t.sent);case 19:N();case 20:case"end":return t.stop()}}),t)}))),style:{width:"100%"},children:[Object(j.jsx)("u",{children:" Buy"})," "]})]})}))]}),Object(j.jsxs)("div",{className:"bottom",style:{position:k?"sticky":"absolute",display:"flex",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white"},children:[O&&Object(j.jsxs)(d.a,{size:k?"small":"medium",title:"unsync",onClick:function(){!function(){C.apply(this,arguments)}()},children:[Object(j.jsx)("u",{children:"unsync"})," "]}),O&&Object(j.jsx)("div",{children:" | "}),Object(j.jsxs)(d.a,{title:"sync",size:k?"small":"medium",onClick:Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:case"end":return e.stop()}}),e)}))),children:[Object(j.jsx)("u",{children:p})," "]})]})]})})},v='\nquery collectorGallery($address: String!) {\n  hic_et_nunc_token_holder(where: {holder_id: {_eq: $address}, token: {creator: {address: {_neq: $address}}}, quantity: {_gt: "0"}}, order_by: {token_id: desc}) {\n\ttoken {\n\t  id\n\t  artifact_uri\n\t  display_uri\n\t  thumbnail_uri\n\t  timestamp\n\t  mime\n\t  title\n\t  description\n\t  supply\n\t  royalties\n\t  creator {\n\t\taddress\n\t  }\n\t}\n  }\n}\n',O=n(65),w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,364)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))};n.n(O).a.render(Object(j.jsx)(g,{}),document.getElementById("root")),w()}},[[341,1,2]]]);
//# sourceMappingURL=main.6d4f4b19.chunk.js.map